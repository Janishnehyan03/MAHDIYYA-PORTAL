{"version":3,"file":"static/js/803.53dc67c6.chunk.js","mappings":"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","sources":["pages/SpecialHallticket.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { PDFDocument, rgb } from \"pdf-lib\"; // Import PDFDocument and rgb from pdf-lib\r\nimport axios from \"axios\";\r\nimport Axios from \"../Axios\";\r\n\r\nconst PdfCustomizer = () => {\r\n  const [registerNumber, setRegisterNumber] = useState(\"\");\r\n  const [pdfBytes, setPdfBytes] = useState(null); // State variable to store PDF bytes\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleRegisterNumberChange = (event) => {\r\n    setRegisterNumber(event.target.value);\r\n  };\r\n\r\n  const fetchStudentData = async () => {\r\n    try {\r\n      let { data } = await Axios.get(\r\n        `/hall-ticket/special-hallticket/${registerNumber}`\r\n      );\r\n      console.log(data);\r\n      setError(null);\r\n\r\n      // Fetch the PDF file from the server\r\n      const pdfResponse = await axios.get(\"/hall-ticket.pdf\", {\r\n        responseType: \"arraybuffer\",\r\n      });\r\n      const pdfBytes = pdfResponse.data;\r\n      const pdfDoc = await PDFDocument.load(pdfBytes);\r\n      const pages = pdfDoc.getPages();\r\n      const firstPage = pages[0];\r\n\r\n      const { height } = firstPage.getSize();\r\n      const drawColumnText = (text, x, yStart, yIncrement, size) => {\r\n        const lines = text.split(\",\");\r\n        lines.forEach((line, index) => {\r\n          firstPage.drawText(line.trim(), {\r\n            x: x,\r\n            y: yStart - index * yIncrement,\r\n            size: size,\r\n            // color: rgb(0, 0, 0),  // Uncomment if you want to set the color\r\n          });\r\n        });\r\n      };\r\n      \r\n      const yStartSecondSem = height - 470;\r\n      const yStartForthSem = height - 525;\r\n      const yStartMAHDIYYAHSecondSem = height - 580;\r\n      const yStartMAHDIYYAHForthSem = height - 645;\r\n      const yStartMAHDIYYAHSixthSem = height - 698;\r\n      const yIncrement = 15;  // Adjust this value as needed\r\n\r\n      firstPage.drawText(data.name, {\r\n        x: 150,\r\n        y: height - 230,\r\n        size: 12,\r\n        color: rgb(0, 0, 0),\r\n      });\r\n      firstPage.drawText(data?.institution || \"\", {\r\n        x: 150,\r\n        y: height - 254,\r\n        size: 9,\r\n        color: rgb(0, 0, 0),\r\n      });\r\n      firstPage.drawText(data?.registerNo || \"\", {\r\n        x: 150,\r\n        y: height - 275,\r\n        size: 12,\r\n        color: rgb(0, 0, 0),\r\n      });\r\n      firstPage.drawText(data?.semester || \"\", {\r\n        x: 150,\r\n        y: height - 295,\r\n        size: 9,\r\n        color: rgb(0, 0, 0),\r\n      });\r\n      firstPage.drawText(data?.examCentre || \"\", {\r\n        x: 200,\r\n        y: height - 360,\r\n        size: 8,\r\n        color: rgb(0, 0, 0),\r\n      });\r\n      firstPage.drawText(data?.method || \"\", {\r\n        x: 200,\r\n        y: height - 390,\r\n        size: 9,\r\n        color: rgb(0, 0, 0),\r\n      });\r\n      drawColumnText(\r\n  data?.semesters?.secondSem || \"_____________________\",\r\n  240,\r\n  yStartSecondSem,\r\n  yIncrement,\r\n  9\r\n);\r\n\r\ndrawColumnText(\r\n  data?.semesters?.forthSem || \"_____________________\",\r\n  240,\r\n  yStartForthSem,\r\n  yIncrement,\r\n  9\r\n);\r\n\r\ndrawColumnText(\r\n  data?.semesters?.MAHDIYYAHSecondSem || \"_____________________\",\r\n  240,\r\n  yStartMAHDIYYAHSecondSem,\r\n  yIncrement,\r\n  9\r\n);\r\n\r\ndrawColumnText(\r\n  data?.semesters?.MAHDIYYAHForthSem || \"_____________________\",\r\n  240,\r\n  yStartMAHDIYYAHForthSem,\r\n  yIncrement,\r\n  9\r\n);\r\n\r\ndrawColumnText(\r\n  data?.semesters?.MAHDIYYAHSixthSem || \"_____________________\",\r\n  240,\r\n  yStartMAHDIYYAHSixthSem,\r\n  yIncrement,\r\n  9\r\n);\r\n      const modifiedPdfBytes = await pdfDoc.save();\r\n      setPdfBytes(modifiedPdfBytes);\r\n    } catch (error) {\r\n      console.error(\"Error fetching student data or PDF\", error);\r\n      setError(\"Error fetching student data or PDF\");\r\n    }\r\n  };\r\n\r\n  const handleGeneratePdf = () => {\r\n    try {\r\n      if (pdfBytes) {\r\n        const blob = new Blob([pdfBytes], { type: \"application/pdf\" });\r\n        saveAs(blob, \"hall-ticket.pdf\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error generating PDF\", error);\r\n      setError(\"Error generating PDF\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-4\">\r\n      <h1 className=\"text-center font-bold text-xl uppercase my-5 text-sky-800\">\r\n        Download Your Hall Ticket{\" \"}\r\n      </h1>\r\n      <input\r\n        type=\"text\"\r\n        value={registerNumber}\r\n        onChange={handleRegisterNumberChange}\r\n        placeholder=\"Enter Register Number\"\r\n        className=\"w-full p-2 border border-gray-300 rounded\"\r\n      />\r\n      <p className=\"text-red-500 my-2 italic text-sm lowercase\">\r\n        *Use Only Capital Letters{\" \"}\r\n      </p>\r\n      {error && <div className=\"text-red-500\">{error}</div>}\r\n      {/* Display \"Generate PDF\" button only when PDF bytes are available */}\r\n      {pdfBytes && (\r\n        <button\r\n          onClick={handleGeneratePdf}\r\n          className=\"bg-blue-600 hover:bg-blue-600 text-white mr-3 py-2 px-4 rounded\"\r\n        >\r\n          Generate PDF\r\n        </button>\r\n      )}\r\n      <button\r\n        onClick={fetchStudentData}\r\n        className=\"bg-violet-500 hover:bg-violet-600 text-white py-2 px-4 rounded\"\r\n      >\r\n        GET HALL TICKET\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PdfCustomizer;\r\n"],"names":["useState","registerNumber","setRegisterNumber","pdfBytes","setPdfBytes","error","setError","fetchStudentData","Axios","data","console","log","axios","responseType","pdfResponse","PDFDocument","pdfDoc","pages","getPages","firstPage","getSize","height","drawColumnText","text","x","yStart","yIncrement","size","split","forEach","line","index","drawText","trim","y","yStartSecondSem","yStartForthSem","yStartMAHDIYYAHSecondSem","yStartMAHDIYYAHForthSem","yStartMAHDIYYAHSixthSem","name","color","rgb","institution","registerNo","semester","examCentre","method","semesters","secondSem","forthSem","MAHDIYYAHSecondSem","MAHDIYYAHForthSem","MAHDIYYAHSixthSem","save","modifiedPdfBytes","className","type","value","onChange","event","target","placeholder","onClick","blob","Blob","saveAs"],"sourceRoot":""}