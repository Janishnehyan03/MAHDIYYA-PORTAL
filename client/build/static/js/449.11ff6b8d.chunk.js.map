{"version":3,"file":"static/js/449.11ff6b8d.chunk.js","mappings":"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","sources":["pages/StudentResult.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport Axios from \"../Axios\";\r\nimport ReactToPrint from \"react-to-print\";\r\n\r\nconst StudentResultPage = () => {\r\n  const ref = useRef();\r\n\r\n  const [registerNumber, setRegisterNumber] = useState(\"\");\r\n  const [studentResults, setStudentResults] = useState([]);\r\n  const [cceResults, setCceResults] = useState([]);\r\n  const [examId, setExamId] = useState(\"\");\r\n  const [exams, setExams] = useState([]);\r\n  const [resultData, setResultData] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Fetch exams once\r\n  useEffect(() => {\r\n    const fetchExams = async () => {\r\n      try {\r\n        const response = await Axios.get(`/exam?isActive=true`);\r\n        setExams(response.data);\r\n      } catch (error) {\r\n        setExams([]);\r\n      }\r\n    };\r\n    fetchExams();\r\n  }, []);\r\n\r\n  // Submit handler\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setResultData(null);\r\n    setStudentResults([]);\r\n    setCceResults([]);\r\n    try {\r\n      const response = await Axios.get(`/result/${examId}/${registerNumber}`);\r\n      if (response.data?.results?.length || response.data?.cceResults?.length) {\r\n        setResultData(response.data);\r\n        setStudentResults(response.data?.results || []);\r\n        setCceResults(response.data?.cceResults || []);\r\n      } else {\r\n        setError(\"No results found for this student and exam.\");\r\n      }\r\n    } catch (error) {\r\n      setError(\"Error fetching student results.\");\r\n    }\r\n  };\r\n\r\n  // Merge results and CCE by subject for combined table\r\n  const mergedSubjects = React.useMemo(() => {\r\n    const examSubjects = studentResults.map((res) => res.subject?.subjectName);\r\n    const cceSubjects = cceResults.map((res) => res.subject?.subjectName);\r\n    const allSubjects = Array.from(new Set([...examSubjects, ...cceSubjects]));\r\n\r\n    return allSubjects.map((subject) => {\r\n      const exam = studentResults.find(\r\n        (res) => res.subject?.subjectName === subject\r\n      );\r\n      const cce = cceResults.find(\r\n        (res) => res.subject?.subjectName === subject\r\n      );\r\n      const examMark = exam?.marksObtained ?? \"-\";\r\n      const cceMark = cce?.cceMark ?? \"-\";\r\n      let total = \"-\";\r\n      if (\r\n        examMark !== \"-\" &&\r\n        cceMark !== \"-\" &&\r\n        examMark !== \"A\" &&\r\n        cceMark !== \"A\"\r\n      ) {\r\n        total = Number(examMark) + Number(cceMark);\r\n      } else if (examMark === \"A\" || cceMark === \"A\") {\r\n        total = \"A\";\r\n      } else if (examMark !== \"-\" && cceMark === \"-\") {\r\n        total = examMark;\r\n      } else if (examMark === \"-\" && cceMark !== \"-\") {\r\n        total = cceMark;\r\n      }\r\n      const maxMarks =\r\n        exam?.subject?.totalMarks ||\r\n        cce?.maxMarks ||\r\n        exam?.maxMarks ||\r\n        100;\r\n      return {\r\n        subject,\r\n        examMark,\r\n        cceMark,\r\n        total,\r\n        maxMarks,\r\n      };\r\n    });\r\n  }, [studentResults, cceResults]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8 bg-slate-50 min-h-screen\">\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"max-w-sm mx-auto bg-white shadow-md rounded-xl px-8 pt-6 pb-8 mb-4 border border-slate-200\"\r\n      >\r\n        <div className=\"mb-4\">\r\n          <label\r\n            htmlFor=\"registerNumber\"\r\n            className=\"block text-slate-700 text-sm font-bold mb-2\"\r\n          >\r\n            Enter Register Number:\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"registerNumber\"\r\n            value={registerNumber}\r\n            onChange={(e) => setRegisterNumber(e.target.value)}\r\n            className=\"w-full border border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label\r\n            htmlFor=\"examSelect\"\r\n            className=\"block text-slate-700 text-sm font-bold mb-2\"\r\n          >\r\n            Select Exam:\r\n          </label>\r\n          <select\r\n            id=\"examSelect\"\r\n            value={examId}\r\n            onChange={(e) => setExamId(e.target.value)}\r\n            className=\"w-full border border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            required\r\n          >\r\n            <option value=\"\">Select Exam</option>\r\n            {exams.map((item) => (\r\n              <option key={item._id} value={item._id}>\r\n                {item.examName}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg transition\"\r\n          >\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </form>\r\n      {error && (\r\n        <div className=\"max-w-sm mx-auto rounded bg-red-100 text-red-600 px-4 py-3 mb-4 text-center font-semibold\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {(studentResults.length > 0 || cceResults.length > 0) && resultData && (\r\n        <>\r\n          <div\r\n            className=\"bg-white my-4 p-8 shadow-lg rounded-xl border border-slate-200\"\r\n            ref={ref}\r\n          >\r\n            <img src=\"/logo.png\" className=\"h-20 mx-auto mb-4\" alt=\"logo\" />\r\n            <div className=\"p-2 mb-6 text-center\">\r\n              <p className=\"text-lg font-semibold text-blue-700 mb-2 uppercase\">\r\n                {studentResults[0]?.exam?.examName}\r\n              </p>\r\n              <p className=\"text-slate-700 mb-1\">\r\n                Student Name: <span className=\"font-semibold\">{resultData?.student?.studentName}</span>\r\n              </p>\r\n              <p className=\"text-slate-700 mb-1\">\r\n                Register No: <span className=\"font-semibold\">{resultData?.student?.registerNo}</span>\r\n              </p>\r\n              <p className=\"text-slate-700 mb-1\">\r\n                Study Centre: <span className=\"font-semibold\">{resultData?.student?.branch?.studyCentreName}</span>\r\n              </p>\r\n              <p className=\"text-slate-700 mb-1\">\r\n                Class: <span className=\"font-semibold\">{resultData?.student?.class?.className}</span>\r\n              </p>\r\n            </div>\r\n            {/* Combined Table */}\r\n            <table className=\"w-full table-auto border rounded-xl mb-6 bg-slate-50\">\r\n              <thead>\r\n                <tr className=\"bg-blue-100\">\r\n                  <th className=\"px-4 py-2 text-sm font-semibold text-slate-700\">\r\n                    Subject\r\n                  </th>\r\n                  <th className=\"px-4 py-2 text-sm font-semibold text-slate-700\">\r\n                    Exam Marks\r\n                  </th>\r\n                  <th className=\"px-4 py-2 text-sm font-semibold text-slate-700\">\r\n                    CCE Marks\r\n                  </th>\r\n                  <th className=\"px-4 py-2 text-sm font-semibold text-slate-700\">\r\n                    Total\r\n                  </th>\r\n                  <th className=\"px-4 py-2 text-sm font-semibold text-slate-700\">\r\n                    Max Marks\r\n                  </th>\r\n                  <th className=\"px-4 py-2 text-sm font-semibold text-slate-700\">\r\n                    Status\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {mergedSubjects.map((row) => (\r\n                  <tr key={row.subject} className=\"even:bg-white odd:bg-slate-50\">\r\n                    <td className=\"px-4 py-3 text-center font-medium\">{row.subject}</td>\r\n                    <td className=\"px-4 py-3 text-center\">{row.examMark}</td>\r\n                    <td className=\"px-4 py-3 text-center text-indigo-700 font-semibold\">{row.cceMark}</td>\r\n                    <td className=\"px-4 py-3 text-center font-bold text-green-700\">\r\n                      {row.total}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-center\">{row.maxMarks}</td>\r\n                    <td\r\n                      className={`px-4 py-3 text-center font-semibold ${\r\n                        (row.total !== \"-\" && row.total !== \"A\" && Number(row.total) >= 40)\r\n                          ? \"text-green-600\"\r\n                          : row.total === \"A\"\r\n                          ? \"text-orange-500\"\r\n                          : \"text-red-600\"\r\n                      }`}\r\n                    >\r\n                      {row.total === \"A\"\r\n                        ? \"Absent\"\r\n                        : row.total !== \"-\" && Number(row.total) >= 40\r\n                        ? \"P\"\r\n                        : \"F\"}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <div className=\"mx-auto bg-blue-50 rounded-lg flex flex-col md:flex-row justify-center md:justify-around items-center mt-4 p-4 gap-2\">\r\n              <p className=\"text-blue-800 font-semibold p-2\">\r\n                Grand Total: {resultData.grandTotal}\r\n              </p>\r\n              <p className=\"text-blue-800 font-semibold p-2\">\r\n                Percentage: {resultData.percentage}%\r\n              </p>\r\n            </div>\r\n            <div className=\"p-3 text-center bg-blue-100 mt-4 w-full rounded-lg\">\r\n              <h1 className=\"font-semibold text-blue-800\">CPET DARUL HUDA</h1>\r\n              <a href=\"https://cpetdhiu.in\" className=\"text-blue-600 hover:underline\">cpetdhiu.in</a>\r\n            </div>\r\n          </div>\r\n          <ReactToPrint\r\n            bodyClass=\"print-agreement\"\r\n            content={() => ref.current}\r\n            documentTitle={\r\n              resultData?.student?.studentName +\r\n              \"-\" +\r\n              resultData?.student?.registerNo\r\n            }\r\n            trigger={() => (\r\n              <div className=\"flex flex-col \">\r\n                <button\r\n                  className=\"text-center bg-blue-600 px-4 py-2 text-white mx-auto rounded-lg mt-2 font-semibold\"\r\n                  type=\"primary\"\r\n                >\r\n                  Print Result\r\n                </button>\r\n              </div>\r\n            )}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentResultPage;"],"names":["ref","useRef","useState","registerNumber","setRegisterNumber","studentResults","setStudentResults","cceResults","setCceResults","examId","setExamId","exams","setExams","resultData","setResultData","error","setError","useEffect","fetchExams","Axios","response","data","handleSubmit","e","preventDefault","results","length","mergedSubjects","React","examSubjects","map","res","subject","subjectName","cceSubjects","Array","from","Set","exam","find","cce","examMark","marksObtained","cceMark","total","Number","maxMarks","totalMarks","className","onSubmit","htmlFor","type","id","value","onChange","target","required","item","_id","examName","src","alt","student","studentName","registerNo","branch","studyCentreName","class","row","grandTotal","percentage","href","bodyClass","content","current","documentTitle","trigger"],"sourceRoot":""}