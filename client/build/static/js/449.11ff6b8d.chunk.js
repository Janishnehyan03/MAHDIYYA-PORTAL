"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[449],{4449:function(e,t,s){s.r(t);var l=s(2982),n=s(4165),a=s(5861),r=s(885),d=s(2791),o=s(9286),c=s(1146),i=s.n(c),u=s(184);t.default=function(){var e,t,s,c,m,x,b,h,v,p,f=(0,d.useRef)(),N=(0,d.useState)(""),j=(0,r.Z)(N,2),g=j[0],y=j[1],k=(0,d.useState)([]),w=(0,r.Z)(k,2),S=w[0],Z=w[1],M=(0,d.useState)([]),A=(0,r.Z)(M,2),C=A[0],E=A[1],R=(0,d.useState)(""),T=(0,r.Z)(R,2),F=T[0],P=T[1],D=(0,d.useState)([]),q=(0,r.Z)(D,2),U=q[0],_=q[1],G=(0,d.useState)(null),H=(0,r.Z)(G,2),L=H[0],O=H[1],z=(0,d.useState)(""),B=(0,r.Z)(z,2),I=B[0],J=B[1];(0,d.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("/exam?isActive=true");case 3:t=e.sent,_(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_([]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var K=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,l,a,r,d,c,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),J(""),O(null),Z([]),E([]),e.prev=5,e.next=8,o.Z.get("/result/".concat(F,"/").concat(g));case 8:d=e.sent,null!==(s=d.data)&&void 0!==s&&null!==(l=s.results)&&void 0!==l&&l.length||null!==(a=d.data)&&void 0!==a&&null!==(r=a.cceResults)&&void 0!==r&&r.length?(O(d.data),Z((null===(c=d.data)||void 0===c?void 0:c.results)||[]),E((null===(i=d.data)||void 0===i?void 0:i.cceResults)||[])):J("No results found for this student and exam."),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),J("Error fetching student results.");case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),Q=d.useMemo((function(){var e=S.map((function(e){var t;return null===(t=e.subject)||void 0===t?void 0:t.subjectName})),t=C.map((function(e){var t;return null===(t=e.subject)||void 0===t?void 0:t.subjectName}));return Array.from(new Set([].concat((0,l.Z)(e),(0,l.Z)(t)))).map((function(e){var t,s,l,n=S.find((function(t){var s;return(null===(s=t.subject)||void 0===s?void 0:s.subjectName)===e})),a=C.find((function(t){var s;return(null===(s=t.subject)||void 0===s?void 0:s.subjectName)===e})),r=null!==(t=null===n||void 0===n?void 0:n.marksObtained)&&void 0!==t?t:"-",d=null!==(s=null===a||void 0===a?void 0:a.cceMark)&&void 0!==s?s:"-",o="-";"-"!==r&&"-"!==d&&"A"!==r&&"A"!==d?o=Number(r)+Number(d):"A"===r||"A"===d?o="A":"-"!==r&&"-"===d?o=r:"-"===r&&"-"!==d&&(o=d);var c=(null===n||void 0===n||null===(l=n.subject)||void 0===l?void 0:l.totalMarks)||(null===a||void 0===a?void 0:a.maxMarks)||(null===n||void 0===n?void 0:n.maxMarks)||100;return{subject:e,examMark:r,cceMark:d,total:o,maxMarks:c}}))}),[S,C]);return(0,u.jsxs)("div",{className:"container mx-auto px-4 py-8 bg-slate-50 min-h-screen",children:[(0,u.jsxs)("form",{onSubmit:K,className:"max-w-sm mx-auto bg-white shadow-md rounded-xl px-8 pt-6 pb-8 mb-4 border border-slate-200",children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{htmlFor:"registerNumber",className:"block text-slate-700 text-sm font-bold mb-2",children:"Enter Register Number:"}),(0,u.jsx)("input",{type:"text",id:"registerNumber",value:g,onChange:function(e){return y(e.target.value)},className:"w-full border border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{htmlFor:"examSelect",className:"block text-slate-700 text-sm font-bold mb-2",children:"Select Exam:"}),(0,u.jsxs)("select",{id:"examSelect",value:F,onChange:function(e){return P(e.target.value)},className:"w-full border border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select Exam"}),U.map((function(e){return(0,u.jsx)("option",{value:e._id,children:e.examName},e._id)}))]})]}),(0,u.jsx)("div",{className:"text-center",children:(0,u.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg transition",children:"Submit"})})]}),I&&(0,u.jsx)("div",{className:"max-w-sm mx-auto rounded bg-red-100 text-red-600 px-4 py-3 mb-4 text-center font-semibold",children:I}),(S.length>0||C.length>0)&&L&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"bg-white my-4 p-8 shadow-lg rounded-xl border border-slate-200",ref:f,children:[(0,u.jsx)("img",{src:"/logo.png",className:"h-20 mx-auto mb-4",alt:"logo"}),(0,u.jsxs)("div",{className:"p-2 mb-6 text-center",children:[(0,u.jsx)("p",{className:"text-lg font-semibold text-blue-700 mb-2 uppercase",children:null===(e=S[0])||void 0===e||null===(t=e.exam)||void 0===t?void 0:t.examName}),(0,u.jsxs)("p",{className:"text-slate-700 mb-1",children:["Student Name: ",(0,u.jsx)("span",{className:"font-semibold",children:null===L||void 0===L||null===(s=L.student)||void 0===s?void 0:s.studentName})]}),(0,u.jsxs)("p",{className:"text-slate-700 mb-1",children:["Register No: ",(0,u.jsx)("span",{className:"font-semibold",children:null===L||void 0===L||null===(c=L.student)||void 0===c?void 0:c.registerNo})]}),(0,u.jsxs)("p",{className:"text-slate-700 mb-1",children:["Study Centre: ",(0,u.jsx)("span",{className:"font-semibold",children:null===L||void 0===L||null===(m=L.student)||void 0===m||null===(x=m.branch)||void 0===x?void 0:x.studyCentreName})]}),(0,u.jsxs)("p",{className:"text-slate-700 mb-1",children:["Class: ",(0,u.jsx)("span",{className:"font-semibold",children:null===L||void 0===L||null===(b=L.student)||void 0===b||null===(h=b.class)||void 0===h?void 0:h.className})]})]}),(0,u.jsxs)("table",{className:"w-full table-auto border rounded-xl mb-6 bg-slate-50",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"bg-blue-100",children:[(0,u.jsx)("th",{className:"px-4 py-2 text-sm font-semibold text-slate-700",children:"Subject"}),(0,u.jsx)("th",{className:"px-4 py-2 text-sm font-semibold text-slate-700",children:"Exam Marks"}),(0,u.jsx)("th",{className:"px-4 py-2 text-sm font-semibold text-slate-700",children:"CCE Marks"}),(0,u.jsx)("th",{className:"px-4 py-2 text-sm font-semibold text-slate-700",children:"Total"}),(0,u.jsx)("th",{className:"px-4 py-2 text-sm font-semibold text-slate-700",children:"Max Marks"}),(0,u.jsx)("th",{className:"px-4 py-2 text-sm font-semibold text-slate-700",children:"Status"})]})}),(0,u.jsx)("tbody",{children:Q.map((function(e){return(0,u.jsxs)("tr",{className:"even:bg-white odd:bg-slate-50",children:[(0,u.jsx)("td",{className:"px-4 py-3 text-center font-medium",children:e.subject}),(0,u.jsx)("td",{className:"px-4 py-3 text-center",children:e.examMark}),(0,u.jsx)("td",{className:"px-4 py-3 text-center text-indigo-700 font-semibold",children:e.cceMark}),(0,u.jsx)("td",{className:"px-4 py-3 text-center font-bold text-green-700",children:e.total}),(0,u.jsx)("td",{className:"px-4 py-3 text-center",children:e.maxMarks}),(0,u.jsx)("td",{className:"px-4 py-3 text-center font-semibold ".concat("-"!==e.total&&"A"!==e.total&&Number(e.total)>=40?"text-green-600":"A"===e.total?"text-orange-500":"text-red-600"),children:"A"===e.total?"Absent":"-"!==e.total&&Number(e.total)>=40?"P":"F"})]},e.subject)}))})]}),(0,u.jsxs)("div",{className:"mx-auto bg-blue-50 rounded-lg flex flex-col md:flex-row justify-center md:justify-around items-center mt-4 p-4 gap-2",children:[(0,u.jsxs)("p",{className:"text-blue-800 font-semibold p-2",children:["Grand Total: ",L.grandTotal]}),(0,u.jsxs)("p",{className:"text-blue-800 font-semibold p-2",children:["Percentage: ",L.percentage,"%"]})]}),(0,u.jsxs)("div",{className:"p-3 text-center bg-blue-100 mt-4 w-full rounded-lg",children:[(0,u.jsx)("h1",{className:"font-semibold text-blue-800",children:"CPET DARUL HUDA"}),(0,u.jsx)("a",{href:"https://cpetdhiu.in",className:"text-blue-600 hover:underline",children:"cpetdhiu.in"})]})]}),(0,u.jsx)(i(),{bodyClass:"print-agreement",content:function(){return f.current},documentTitle:(null===L||void 0===L||null===(v=L.student)||void 0===v?void 0:v.studentName)+"-"+(null===L||void 0===L||null===(p=L.student)||void 0===p?void 0:p.registerNo),trigger:function(){return(0,u.jsx)("div",{className:"flex flex-col ",children:(0,u.jsx)("button",{className:"text-center bg-blue-600 px-4 py-2 text-white mx-auto rounded-lg mt-2 font-semibold",type:"primary",children:"Print Result"})})}})]})]})}}}]);
//# sourceMappingURL=449.11ff6b8d.chunk.js.map